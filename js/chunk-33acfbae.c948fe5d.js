(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33acfbae"],{"7bd5":function(t,e,s){"use strict";s("f94d")},"98ff":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition-group",{attrs:{appear:"",name:"fade"}},[t.testItems&&t.testItems.length?s("app-test",{key:"app-test",attrs:{testTitle:"Финальный тест",testItems:t.testItems,testResult:t.testResult,submitButtonText:t.submitButtonText,isBackplateEnabled:t.isBackplateEnabled,testLength:15},on:{"on-complete":t.onComplete,"on-test-completed-change":t.onTestCompletedChange}}):s("app-loader",{key:"loader"}),t.isTestCompleted&&t.isModalActive?s("app-modal",{key:"modal-window"},[s("transition",{attrs:{appear:"",name:"fade"}},[s("div",{staticClass:"modal-content"},[s("h3",{class:"modal-title"+(t.isPassed?" passed":" failed")},[t._v(" "+t._s("Тест"+(t.isPassed?"":" не")+" пройден")+" ")]),s("div",{staticClass:"modal-options"},[t.isPassed?s("app-button",{attrs:{background:"red",width:300}},[s("a",{attrs:{href:t.tableLink,rel:"noopener noreferrer"}},[t._v("Таблица результатов")])]):s("app-button",{attrs:{background:"red",width:320},nativeOn:{click:function(e){return t.onLookErrors.apply(null,arguments)}}},[t._v(" Посмотреть результат ")])],1)])])],1):t._e(),t.isLoaderVisible?s("app-loader",{key:"complete-loader"}):t._e()],1)},a=[],r=s("1da1"),o=(s("96cf"),s("b64b"),s("5fb0")),i=s("0a01"),u=s("c863"),c=s("4286"),l=s("56ed"),d={name:"final-test",components:{"app-button":i["a"],"app-modal":c["a"],"app-test":l["a"],"app-loader":u["a"]},computed:{testItems:function(){return this.$store.getters[o["b"].GET_FINAL_TEST]},isModalActive:function(){return this.$store.getters[o["b"].GET_IS_MODAL_ACTIVE]},testResult:function(){return this.$store.getters[o["b"].GET_FINAL_TEST_RESULT]},isPassed:function(){return this.$store.getters[o["b"].GET_FINAL_TEST_PASSED_STATUS]},attemptsCount:function(){return this.$store.getters[o["b"].GET_FINAL_TEST_ATTEMPTS_COUNTER]},submitButtonText:function(){return 0===this.attemptsCount?"На главную":Object.keys(this.testResult).length&&!this.isPassed?"Повторить":void 0}},data:function(){return{isTestCompleted:!1,homeButtonSize:150,isBackplateEnabled:!1,isLoaderVisible:!1,tableLink:o["f"].sheet}},methods:{onComplete:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.isLoaderVisible=!0,e.submitButtonText){s.next=8;break}return s.next=4,e.$store.dispatch(o["a"].SEND_FINAL_TEST_RESULT,{answers:t.answers});case 4:e.isLoaderVisible=!1,e.setModalStatus(!0),s.next=14;break;case 8:if(!e.attemptsCount){s.next=13;break}return s.next=11,e.onRestart();case 11:s.next=14;break;case 13:e.$router.push({name:o["d"].HOME});case 14:case"end":return s.stop()}}),s)})))()},fetchTest:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isPassed){e.next=2;break}return e.abrupt("return",console.log("Final test already passed"));case 2:return e.next=4,t.$store.dispatch(o["a"].FETCH_FINAL_TEST);case 4:case"end":return e.stop()}}),e)})))()},onRestart:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTest();case 2:t.$root.$emit("on-test-restart"),t.setModalStatus(!1),t.isBackplateEnabled=!1,t.isLoaderVisible=!1;case 6:case"end":return e.stop()}}),e)})))()},onLookErrors:function(){this.isBackplateEnabled=!0,this.setModalStatus(!1)},onTestCompletedChange:function(t){this.isTestCompleted=t},setModalStatus:function(t){this.$store.dispatch(o["a"].SET_MODAL_STATUS,{status:t})},onMainPage:function(){this.$router.push({name:o["d"].HOME})}},watch:{attemptsCount:function(t){t||this.isPassed||this.$store.dispatch(o["a"].SET_FINAL_TEST_DISABLED_UNTIL,{until:Date.now()+3e5})}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(s=t.testItems)&&void 0!==s&&s.length||t.isPassed){e.next=9;break}return e.prev=1,e.next=4,t.fetchTest();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))()},beforeDestroy:function(){this.setModalStatus(!1),this.onRestart()}},p=d,h=(s("7bd5"),s("2877")),f=Object(h["a"])(p,n,a,!1,null,null,null);e["default"]=f.exports},f94d:function(t,e,s){}}]);
//# sourceMappingURL=chunk-33acfbae.c948fe5d.js.map